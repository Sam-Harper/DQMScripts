# DQMScripts

This package allows E/gamma (HLT so far) to manipulate the histograms stored in the DQM for easier validation. There are seperate scripts for the type of monitoring, so far MC RelVals and Prompt Data 

#################################

Prompt Data Monitoring workflow:

#################################

The prompt data monitoring is used to monitor the quality of the data taken over the course of the year. 

The script:

      pyScripts/makePromptDQMPlots.py  egammaDQMHists.root -r hltData2018_runInfo.json  -o eghltweb
 
generates a webpage with all the monitoring information for easy viewing. It requires two input files, "egammaDQMHists.root" a file containing the histograms from the DQM and "hltData2018_runInfo.json" a file containing information about the runs. It outputs a webpage with all the validation information in the directory "eghltweb"

Downloading the histograms from the DQM gui:

To download the histograms from the gui, simply use this command
    
    pyScripts/egHLTDQMDownloader.py --output egammaDQMHists.root --dataset /EGamma/Run2018*-PromptReco-v\*/DQMIO

This will dump all the required histograms for all runs in any of the datasets matching the patter specified after "--dataset" into the root file "egammaDQMHists.root". It is enforced that a run only appears once per primary dataset, it resolves this by taking the run from the newest dataset. This can take some time, say around 20-30mins to complete. 

Generating the runInfo file:

The run info file is used to group the runs into fills. It is generated by a different package https://github.com/Sam-Harper/wbmtools, which involves installing some dependences. 
